<!--author: Alfredo SÃ¡nchez Alberca (asalber@ceu.es) -->

<!DOCTYPE rkplugin>
<document>
    <code file="anova.js" />
    <help file="anova.rkh" />
    
    <logic>
        <connect governor="current_object" client="dataframe.available" />
        <connect governor="dataframe.available" client="selector.root" />
        <convert id="dataframe_sel" sources="dataframe.available" mode="notequals" />
        <convert id="between_sel" sources="design.string" mode="equals" standard="between" />
        <convert id="within_sel" sources="design.string" mode="equals" standard="within" />
        <convert id="mixed_sel" sources="design.string" mode="equals" standard="mixed" />
        <convert id="between_or_mixed" sources="between_sel;mixed_sel" mode="or" />
        <convert id="within_or_mixed" sources="within_sel;mixed_sel" mode="or" />
        <connect governor="dataframe_sel" client="dep.enabled" />
        <connect governor="dataframe_sel" client="between.enabled" />
        <connect governor="dataframe_sel" client="within.enabled" />
        <connect governor="dataframe_sel" client="caseid.enabled" />
        <connect governor="within_or_mixed" client="caseid.visible" />
        <connect governor="within_or_mixed" client="caseid.required" />
        <connect governor="between_or_mixed" client="between.visible" />
        <connect governor="within_or_mixed" client="within.visible" />
        <connect governor="between_or_mixed" client="between.required" />
        <connect governor="within_or_mixed" client="within.required" />
        <connect governor="dataframe_sel" client="row_observed.enabled" />
        <connect governor="dataframe.available" client="selector2.root" />
        <connect client="filter_embed.variable" governor="dep.available" />
    </logic>
    
    <dialog label="Analysis of variance (ANOVA)">
        <tabbook>
            <tab id="tab_variable" label="Variables" >
                <row id="variables">
                    <varselector id="selector" label="Select variables" />
                    <column>
                        <varslot id="dataframe" label="Data set" source="selector" classes="data.frame" required="true" />
                        <radio id="design" label="Design">
                            <option label="Between subjects" value="between" checked="true" />
                            <option label="Within subjects (repeated mesures)" value="within"/>
                            <option label="Mixed" value="mixed" />
                        </radio>
                        <frame>
                            <varslot id="dep" label="Dependent variable" source="selector" required="true" />
                        </frame>
                        <frame>
                            <varslot id="between" label="Between subjects factors" source="selector" multi="true" />
                            <varslot id="within" label="Whithin subjects factors" source="selector" multi="true" />
                            <varslot id="caseid" label="Case/subject identifier" source="selector" multi="false" />
                        </frame>
                        <embed id="filter_embed" component="rkTeaching::filter_embed"/>
                        <saveobject id="save" label="Save results to workspace" checkable="true" initial="anova.results" />
                        <stretch />
                    </column>
                </row>
            </tab>
            <!-- 
            <tab label="Observed" id="tab_Observed">
            <row id="row_observed">
            <varselector id="selector2" label="Select observed variables" />
            <column id="clm_fOTOOTOOOS">
            <frame id="frm_txtdtxtOTO">
            <text id="txt_ObsrvdvT">
            Observed variables are independent variables you have 								<b>
            already defined
            </b>
            as either between or within variables, but that were measured and 								<b>
            not manipulated
            </b>
            </text>
            </frame>
            <frame id="frm_vrsltdvOOS">
            <varslot id="vrsl_Obsrvdvr" label="Observed variables (not manipulated)" source="selector2" multi="true" />
            </frame>
            </column>
            </row>
            </tab>
            -->
            <tab id="tab_options" label="Test options" >
                <row>
                    <column>
                        <frame>
                            <dropdown id="sumsqtype" label="Sum of squares type for unbalanced designs">
                                <option label="Type 1" value="1" />
                                <option label="Type 2" value="2" checked="true" />
                                <option label="Type 3" value="3" />
                            </dropdown>
                            <checkbox id="sumsq" label="Show sum of squares" value_unckecked="0" value="1" />
                        </frame>
                        <frame>
                            <dropdown id="heterocedasticity" label="Heterocedasticity correction">
                                <option label="None" value="false" checked="true" />
                                <option label="hc3 (Long &amp; Ervin; default)" value="hc3" />
                                <option label="hc0 (White)" value="hc0" />
                                <option label="hc1 (Long &amp; Ervin)" value="hc1" />
                                <option label="hc2 (Long &amp; Ervin)" value="hc2" />
                                <option label="hc4 (Cribari-Neto)" value="hc4" />
                            </dropdown>
                        </frame>
                        <stretch />
                    </column>
                </row>
            </tab>
            <tab id="tab_pairwise" label="Pairwise comparison" >
                <checkbox id="pairwise" label="Pairwise comparison of means" value_unchecked="0" value="1" />
                <checkbox id="pairwise_plot" label="Plot confidence intervals for the means" value_unchecked="0" value="1" />
                <stretch/>
            </tab>
        </tabbook>
    </dialog>
    
    <wizard label="Analysis of variance (ANOVA) wizard">
        <page id="page_dataframe">
            <text>
                <p>Select the data frame with the variables to test.</p>
                <p>After, check the box corresponding to the type of design, the dependent variable, the independent factors between the subjects, the factors corresponding to repeated measures within the subject and the variable that identifies every suject or case.</p>
            </text>
            <copy id="variables" />
        </page>
        <page id="page_sqtype">
            <text>
                Select the type of sum of squares in case of groups of different size and check the box if you wants to show the sum of squares. 
            </text>
            <copy id="sumsqtype" />
            <copy id="sumsq" />
            <stretch/>
        </page>
        <page id="page_heterocedasticity">
            <text>
                Select the type of heterocedasticity correction if groups have very different variances.
            </text>
            <row>
                <copy id="heterocedasticity" />
            </row>
            <stretch/>
        </page>
        <page id="page_pairwise">
            <text>
                Check the box to perform Tukeys's pairwise comparison of means.  
            </text>
            <copy id="pairwise" />
            <text>
                Check the box to plot the confidence intervals for the means of the groups.  
            </text>
            <copy id="pairwise_plot" />
            <stretch/>
        </page>
    </wizard>
</document>
