<!-- author: Alfredo SÃ¡nchez Alberca (asalber@ceu.es) -->

<!DOCTYPE rkplugin>
<document>
    <code file="meansplot.js" />
    <help file="meansplot.rkh" />
    
    <logic>
        <set id="plotoptions.allow_type" to="true" />
        <set id="plotoptions.allow_ylim" to="true" />
        <set id="plotoptions.allow_xlim" to="false" />
        <set id="plotoptions.allow_log" to="false" />
        <convert id="grouped_mode" mode="equals" sources="grouped.state" standard="1" />
        <connect client="groups.visible" governor="grouped_mode" />
        <connect client="plotoptions.allow_legend" governor="grouped_mode" />
        <connect client="filter_embed.variable" governor="variable.available" />
    </logic>
    
    <dialog label="Means plot">
        <tabbook>
            <tab label="Variables" id="tab_variables">
                <row id="row_vars">
                    <varselector id="selector" label="Select variable(s)" />
                    <column>
                        <varslot id="variable" label="Variable(s)" multi="true" types="number" source="selector" required="true" />
                        <checkbox id="grouped" label="Plot by groups" value_unchecked="0" checked="false" />
                        <varslot id="groups" label="Grouping variable(s):" types="factor" source="selector" multi="true" required="true" />
                        <embed id="filter_embed" component="rkTeaching::filter_embed" />
                        <stretch />
                        <preview id="preview" />
                    </column>
                </row>
            </tab>
            <tab id="tab_means_options" label="Means options">
                <frame id="confint_frame" label="Confidence interval(s) for the mean(s)" checkable="true" checked="true" value="1">
                    <spinbox id="conflevel" label="Confidence level" type="real" min="0" max="0.99" initial="0.95" />
                </frame>
                <checkbox id="points" label="Plot data" checked="false" />
                <embed id="plotoptions" component="rkTeaching::plot_options" as_button="true" label="Graphics options" />
                <stretch />
            </tab>
        </tabbook>
    </dialog>
    
    <wizard label="Means plot wizard">
        <page id="page_variables">
            <text>
                <p>Select the numeric variables to plot the means.</p>
                <p>If you want different means for the categories of one or several factors, check the box <b>Plot by groups</b> and select the factors to define the groups. If you select more than one factor you will get one mean for every category combination of the factors.</p>
            </text>
            <copy id="row_vars" />
            <stretch />
        </page>
        <page id="page_means_options">
            <text>
                Check the box to plot the confidence intervals for the means and enter the desired confidence level.
            </text>
            <copy id="confint_frame" />
            <text>
                Check the box to plot also the data values of the variable. 
            </text>
            <copy id="points" />
            <stretch />
        </page>
        <embed id="plotoptions" component="rkTeaching::plot_options" />
    </wizard>
</document>