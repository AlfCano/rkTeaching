<!-- author: Alfredo SÃ¡nchez Alberca (asalber@ceu.es) -->

<!DOCTYPE rkplugin>
<document>
	<code file="barplot.js"/>
	<help file="barplot.rkh"/>

	<logic>
		<convert id="groupedMode" sources="grouped.state" mode="equals" standard="1"/>
		<connect client="groups.visible" governor="groupedMode"/>
		<connect client="polygon.enabled" governor="groupedMode.not"/>
		<connect client="frame_barfillcolor.enabled" governor="groupedMode.not"/>
		<connect client="frameBarBorderColor.enabled" governor="groupedMode.not"/>
		<convert id="cumulative_mode" sources="cumulative.state" mode="equals" standard="1"/>
		<convert id="grouped_noncumulative_mode" sources="groupedMode;cumulative_mode.not" mode="and"/>
		<connect client="position.enabled" governor="grouped_noncumulative_mode"/>
		<connect client="plotOptions.allow_legend" governor="groupedMode"/>
	</logic>

	<dialog label="Bar chart">
		<tabbook>
			<tab id="tabVariables" label="Variable(s)">
				<row>
					<varselector id="selector" label="Select variable(s)"/>
					<column>
						<varslot id="variable" label="Variable" source="selector" required="true"/>
						<checkbox id="grouped" label="Plot by groups" value_unchecked="0" checked="false"/>
						<varslot id="groups" label="Grouping variable(s)" source="selector" multi="true" required="true"/>
						<include file="../common/filter.xml"/>
						<stretch/>
						<preview id="preview"/>
					</column>
				</row>
			</tab>
			<tab id="tabBarsOptions" label="Bar options">
				<row>
					<column>
						<frame id="frameFreq" label="Frequencies">
							<checkbox id="relative" label="Relative frequency" checked="false" value="1"/>
							<checkbox id="cumulative" label="Cumulative frequency" checked="false" value="1"/>
						</frame>
						<checkbox id="polygon" label="Polygon" checked="false"/>
						<radio id="position" label="Grouping options">
							<option value="dodge" label="Juxtaposed" checked="true"/>
							<option value="stack" label="Stacked"/>
							<option value="faceted" label="Separated"/>
						</radio>
						<stretch/>
					</column>
					<column>
						<frame id="frameBarFillColor" label="Fill color">
							<embed id="barfillcolor" component="rkTeaching::color_chooser" label="Fill color"/>
						</frame>
						<frame id="frameBarBorderColor" label="Border color">
							<embed id="barbordercolor" component="rkTeaching::color_chooser" label="Border color"/>
						</frame>
						<embed id="plotOptions" component="rkTeaching::plot_options" as_button="true" label="Graphic options"/>
						<stretch/>
					</column>
				</row>
			</tab>
		</tabbook>
	</dialog>

	<wizard label="Asistente para diagrama de barras">
		<page id="page_variables">
			<text>
				<p>Select the variable to plot the bar chart.</p>
				<p>If you want different bar charts for the categories of one or several factors, check the box
					<b>Plot by groups</b>
					and select the factors to define the groups. If you select more than one factor you will get one bar chart for every category combination of the factors.</p>
			</text>
			<copy id="row_vars"/>
		</page>
		<page id="pageBarOptions">
			<text>
				<p>Select the type of frequency to plot.</p>
			</text>
			<copy id="frameFreq"/>
			<text>
				<p>Check the box if you want to plot the polygon on the bar chart.</p>
			</text>
			<copy id="polygon"/>
			<text>
				<p>In case of plotting several bar charts by groups, select the layout for the bars: justapoxed (next to each other), stacked (on top of each other) or separated (in separated hisograms).</p>
			</text>
			<copy id="position"/>
			<stretch/>
		</page>
		<page id="pageColor">
			<text>
				Select the fill color for the bars.
			</text>
			<embed id="barfillcolor" component="rkTeaching::color_chooser" label="Fill color"/>
			<text>
				Select the border color for the bars.
			</text>
			<embed id="barbordercolor" component="rkTeaching::color_chooser" label="Border color"/>
			<stretch/>
		</page>
		<embed id="plotOptions" component="rkTeaching::plot_options"/>
	</wizard>
</document>
