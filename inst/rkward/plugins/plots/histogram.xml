<!--author: Alfredo SÃ¡nchez Alberca (asalber@ceu.es) -->

<!DOCTYPE rkplugin>
<document>
	<code file="histogram.js" />
	<help file="histogram.rkh" />
	<logic>
		<connect client="cells.variable" governor="variable.available" />
		<set id="plotoptions.allow_log" to="false" />
		<convert id="relative_freq" mode="equals" sources="relative.state" standard="1" />
		<convert id="cumulative_freq" mode="equals" sources="cumulative.state" standard="1" />
		<convert id="relative_noncumulative_freq" mode="and" sources="relative_freq;cumulative_freq.not" />
		<connect client="density.enabled" governor="relative_noncumulative_freq" />
		<convert id="grouped_mode" mode="equals" sources="grouped.state" standard="1" />
		<convert id="grouped_noncumulative_mode" mode="and" sources="grouped_mode;cumulative_freq.not" />
		<connect client="position.enabled" governor="grouped_noncumulative_mode" />
		<connect client="groups.visible" governor="grouped_mode" />
		<connect client="polygon.enabled" governor="grouped_mode.not" />
		<connect client="frame_barfillcolor.enabled" governor="grouped_mode.not" />
		<connect client="frame_barbordercolor.enabled" governor="grouped_mode.not" />
		<connect client="plotoptions.allow_legend" governor="grouped_mode" />
		<connect client="filter_embed.variable" governor="variable.available" />
	</logic>

	<dialog label="Histogram">
		<tabbook>
			<tab id="tab_variables" label="Variable(s)">
				<row id="row_vars">
					<varselector id="selector" label="Select variable(s)" />
					<column>
						<varslot id="variable" label="Variable" types="number" source="selector" required="true" />
						<checkbox id="grouped" label="Plot by groups" value_unchecked="0" checked="false" />
						<varslot id="groups" label="Grouping variable(s)" types="factor" source="selector" multi="true" required="true" />
						<embed id="filter_embed" component="rkTeaching::filter_embed" />
						<stretch />
						<preview id="preview" />
					</column>
				</row>
			</tab>
			<tab id="tab_hist_options" label="Histogram options">
				<row>
					<column id="col_freq_options">
						<frame id="frame_freq" label="Frequencies">
							<checkbox id="relative" label="Relative frequency" checked="false" value="1" />
							<checkbox id="cumulative" label="Cumulative frequency" checked="false" value="1" />
							<checkbox id="density" label="Density" value="1" checked="false" />
						</frame>
						<checkbox id="polygon" label="Polygon" checked="false" value="1" />
						<radio id="position" label="Grouping options">
							<option value="identity" label="Overlayed" checked="true" />
							<option value="dodge" label="Juxtaposed" />
							<option value="stack" label="Stacked" />
							<option value="faceted" label="Separated" />
						</radio>
						<stretch />
					</column>
					<column id="col_color_options">
						<frame id="frame_barfillcolor" label="Fill color">
							<embed id="barfillcolor" component="rkTeaching::color_chooser" label="Color" />
						</frame>
						<frame id="frame_barbordercolor" label="Border color">
							<embed id="barbordercolor" component="rkTeaching::color_chooser" label="Color" />
						</frame>
						<embed id="plotoptions" component="rkTeaching::plot_options" as_button="true" label="Graphic options" />
						<stretch />
					</column>
				</row>
			</tab>
			<tab id="tab_cells" label="Classes">
				<embed id="cells" component="rkTeaching::cells" />
			</tab>
		</tabbook>
	</dialog>

	<wizard label="Histogram wizard">
		<page id="page_variables">
			<text>
                                <p>Select the variable to plot the histogram.</p>
                                <p>If you want different histograms for the categories of one or several factors, check the box <b>Plot by groups</b> and select the factors to define the groups. If you select more than one factor you will get one histogram for every category combination of the factors.</p>
			</text>
			<copy id="row_vars" />
		</page>
		<page id="page_hist_options">
			<text>
                                <p>Select the type of frequency to plot.</p>
			</text>
			<copy id="frame_freq" />
			<text>
                                <p>Check the box if you want to plot the polygon on the histogram.</p>
			</text>
			<copy id="polygon" />
			<text>
                            <p>In case of plotting several histograms by groups, select the layout for the bars: overlaped (over each other), justapoxed (next to each other), stacked (on top of each other) or separated (in separated hisograms).</p>
			</text>
			<copy id="position" />
			<stretch />
		</page>
		<embed id="cells" component="rkTeaching::cells" />
		<page id="page_color_border">
			<text>
				Select the fill color for the bars.
			</text>
			<embed id="barfillcolor" component="rkTeaching::color_chooser" label="Fill color" />
			<text>
				Select the border color for the bars.
			</text>
			<embed id="barbordercolor" component="rkTeaching::color_chooser" label="Border color" />
			<stretch />
		</page>
		<page>
			<embed id="plotoptions" component="rkTeaching::plot_options" />
		</page>
	</wizard>
</document>